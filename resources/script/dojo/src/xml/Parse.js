dojo.provide("dojo.xml.Parse");dojo.require("dojo.dom");
dojo.xml.Parse=function(){function i(b){try{return b.tagName.toLowerCase()}catch(a){return""}}function j(b){var a=i(b);if(!a)return"";if(dojo.widget&&dojo.widget.tags[a])return a;if(a.indexOf(":")>=0)return a;if(a.substr(0,5)=="dojo:")return a;if(dojo.render.html.capable&&dojo.render.html.ie&&b.scopeName!="HTML")return b.scopeName.toLowerCase()+":"+a;if(a.substr(0,4)=="dojo")return"dojo:"+a.substring(4);if(a=b.getAttribute("dojoType")||b.getAttribute("dojotype")){if(a.indexOf(":")<0)a="dojo:"+a;return a.toLowerCase()}if(a=
b.getAttributeNS&&b.getAttributeNS(dojo.dom.dojoml,"type"))return"dojo:"+a.toLowerCase();try{a=b.getAttribute("dojo:type")}catch(f){}if(a)return"dojo:"+a.toLowerCase();if(dj_global.djConfig&&!djConfig.ignoreClassNames)if((b=b.className||b.getAttribute("class"))&&b.indexOf&&b.indexOf("dojo-")!=-1){b=b.split(" ");a=0;for(var h=b.length;a<h;a++)if(b[a].slice(0,5)=="dojo-")return"dojo:"+b[a].substr(5).toLowerCase()}return""}var k=dojo.render.html.capable&&dojo.render.html.ie;this.parseElement=function(b,
a,f,h){a=i(b);if(k&&a.indexOf("/")==0)return null;try{var d=b.getAttribute("parseWidgets");if(d&&d.toLowerCase()=="false")return{}}catch(l){}var e=true;if(f){var c=j(b);a=c||a;e=Boolean(c)}c={};c[a]=[];var g=a.indexOf(":");if(g>0){g=a.substring(0,g);c.ns=g;if(dojo.ns&&!dojo.ns.allow(g))e=false}if(e){e=this.parseAttributes(b);for(d in e){if(!c[a][d]||typeof c[a][d]!="array")c[a][d]=[];c[a][d].push(e[d])}c[a].nodeRef=b;c.tagName=a;c.index=h||0}for(d=h=0;d<b.childNodes.length;d++){e=b.childNodes.item(d);
switch(e.nodeType){case dojo.dom.ELEMENT_NODE:g=j(e)||i(e);c[g]||(c[g]=[]);c[g].push(this.parseElement(e,true,f,h));if(e.childNodes.length==1&&e.childNodes.item(0).nodeType==dojo.dom.TEXT_NODE)c[g][c[g].length-1].value=e.childNodes.item(0).nodeValue;h++;break;case dojo.dom.TEXT_NODE:b.childNodes.length==1&&c[a].push({value:b.childNodes.item(0).nodeValue});break;default:break}}return c};this.parseAttributes=function(b){var a={};b=b.attributes;for(var f,h=0;f=b[h++];){if(k){if(!f)continue;if(typeof f==
"object"&&typeof f.nodeValue=="undefined"||f.nodeValue==null||f.nodeValue=="")continue}var d=f.nodeName.split(":");d=d.length==2?d[1]:f.nodeName;a[d]={value:f.nodeValue}}return a}};
