/// Copyright (c) 2004-2010, Needlworks  / Tatter Network Foundation
/// All rights reserved. Licensed under the GPL.
/// See the GNU General Public License for more details. (/documents/LICENSE, /documents/COPYRIGHT)
function Converter(a,b){this.doc=a,this.targets=b,this.xmlHeader='<?xml version="1.0" encoding="utf-8"?><config>',this.xmlfooter="</config>"}Converter.prototype.getXMLData=function(){var a="";for(var b=0;b<this.targets.length;b++)try{a+=this.makeDataSet(this.targets[b])}catch(c){}return this.xmlHeader+a+this.xmlfooter},Converter.prototype.makeDataSet=function(a){var b="",c=this.getControl(a),d=this.getType(c);b+='<field   name = "'+a+'" type="'+d+'" >';switch(d){case"select":case"SELECT":case"text":b+="<![CDATA["+c.value+"]]>";break;case"textarea":case"TEXTAREA":b+="<![CDATA["+c.value+"]]>";break;case"radio":b+=this.getRadioData(c);break;case"checkbox":b+=this.getCheckBoxData(c);break;default:throw new Error(0,"알수 없는 타입")}b+="</field >\n";return b},Converter.prototype.getCheckBoxData=function(a){return!0==a.checked?a.value:""},Converter.prototype.getRadioData=function(a){var b="";for(var c=0;c<a.length;c++)if("radio"==a[c].type&&!0==a[c].checked){b=a[c].value;break}return b},Converter.prototype.getControl=function(a){if(undefined==this.doc.getElementById(a))return this.doc.getElementsByName(a);if("radio"==this.doc.getElementById(a).type)return this.doc.getElementsByName(a);return this.doc.getElementById(a)},Converter.prototype.getType=function(a){if(undefined==a)throw new Error(0,"objList 가 정의 안됨");if(undefined!=a.length&&"INPUT"==a[0].tagName)return a[0].getAttribute("type");var b=a.tagName,c=a.getAttribute("type");if("SELECT"==b||"TEXTAREA"==b)return b;if(undefined!=c)return c;throw new Error(0,"type에 접근 안됨")}