/*
 * jQuery UI 1.6rc5
 *
 * Copyright (c) 2009 AUTHORS.txt (http://ui.jquery.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */(function(a){function i(b,c,d,e){function f(d){var e=a[b][c][d]||[];return typeof e=="string"?e.split(/,?\s+/):e}var g=f("getter");e.length==1&&typeof e[0]=="string"&&(g=g.concat(f("getterSetter")));return a.inArray(d,g)!=-1}var b=a.fn.remove,c=a.browser.mozilla&&parseFloat(a.browser.version)<1.9;a.ui={version:"1.6rc5",plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},cssCache:{},css:function(b){if(a.ui.cssCache[b])return a.ui.cssCache[b];var c=a('<div class="ui-gen"></div>').addClass(b).css({position:"absolute",top:"-5000px",left:"-5000px",display:"block"}).appendTo("body");a.ui.cssCache[b]=!!(!/auto|default/.test(c.css("cursor"))||/^[1-9]/.test(c.css("height"))||/^[1-9]/.test(c.css("width"))||!/none/.test(c.css("backgroundImage"))||!/transparent|rgba\(0, 0, 0, 0\)/.test(c.css("backgroundColor")));try{a("body").get(0).removeChild(c.get(0))}catch(d){}return a.ui.cssCache[b]},hasScroll:function(b,c){if(a(b).css("overflow")=="hidden")return!1;var d=c&&c=="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(c){var d=a.attr,e=a.fn.removeAttr,f="http://www.w3.org/2005/07/aaa",g=/^aria-/,h=/^wairole:/;a.attr=function(a,b,c){var e=c!==undefined;return b=="role"?e?d.call(this,a,b,"wairole:"+c):(d.apply(this,arguments)||"").replace(h,""):g.test(b)?e?a.setAttributeNS(f,b.replace(g,"aaa:"),c):d.call(this,a,b.replace(g,"aaa:")):d.apply(this,arguments)},a.fn.removeAttr=function(a){return g.test(a)?this.each(function(){this.removeAttributeNS(f,a.replace(g,""))}):e.call(this,a)}}a.fn.extend({remove:function(){a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return b.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},tabbable:function(b){function d(b){return!a(b).is(":hidden")&&!a(b).parents(":hidden").length}var c=b.nodeName.toLowerCase();return b.tabIndex>=0&&("a"==c&&b.href||/input|select|textarea|button/.test(c)&&"hidden"!=b.type&&!b.disabled)&&d(b)}}),a.widget=function(b,c){var d=b.split(".")[0];b=b.split(".")[1],a.fn[b]=function(c){var e=typeof c=="string",f=Array.prototype.slice.call(arguments,1);if(e&&c.substring(0,1)=="_")return this;if(e&&i(d,b,c,f)){var g=a.data(this[0],b);return g?g[c].apply(g,f):undefined}return this.each(function(){var g=a.data(this,b);!g&&!e&&a.data(this,b,new a[d][b](this,c)),g&&e&&a.isFunction(g[c])&&g[c].apply(g,f)})},a[d]=a[d]||{},a[d][b]=function(c,e){var f=this;this.namespace=d,this.widgetName=b,this.widgetEventPrefix=a[d][b].eventPrefix||b,this.widgetBaseClass=d+"-"+b,this.options=a.extend({},a.widget.defaults,a[d][b].defaults,a.metadata&&a.metadata.get(c)[b],e),this.element=a(c).bind("setData."+b,function(a,b,d){if(a.target==c)return f._setData(b,d)}).bind("getData."+b,function(a,b){if(a.target==c)return f._getData(b)}).bind("remove",function(){return f.destroy()}),this._init()},a[d][b].prototype=a.extend({},a.widget.prototype,c),a[d][b].getterSetter="option"},a.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(b,c){var d=b,e=this;if(typeof b=="string"){if(c===undefined)return this._getData(b);d={},d[b]=c}a.each(d,function(a,b){e._setData(a,b)})},_getData:function(a){return this.options[a]},_setData:function(a,b){this.options[a]=b,a=="disabled"&&this.element[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").attr("aria-disabled",b)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b],f=b==this.widgetEventPrefix?b:this.widgetEventPrefix+b;c=a.Event(c),c.type=f,this.element.trigger(c,d);return!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}},a.widget.defaults={disabled:!1},a.ui.mouse={_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(a){if(b._preventClickEvent){b._preventClickEvent=!1;return!1}}),a.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on")),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(b){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=b.which==1,e=typeof this.options.cancel=="string"?a(b.target).parents().add(b.target).filter(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted){b.preventDefault();return!0}}this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.browser.safari||b.preventDefault();return!0},_mouseMove:function(b){if(a.browser.msie&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=!0,this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}},a.ui.mouse.defaults={cancel:null,distance:1,delay:0}})(jQuery),function(a){a.widget("ui.draggable",a.extend({},a.ui.mouse,{_init:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.cssNamespace&&this.element.addClass(this.options.cssNamespace+"-draggable"),this.options.disabled&&this.element.addClass(this.options.cssNamespace+"-draggable-disabled"),this._mouseInit()},destroy:function(){!this.element.data("draggable")||(this.element.removeData("draggable").unbind(".draggable").removeClass(this.options.cssNamespace+"-draggable "+this.options.cssNamespace+"-draggable-dragging "+this.options.cssNamespace+"-draggable-disabled"),this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is("."+this.options.cssNamespace+"-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b),this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass(c.cssNamespace+"-draggable-dragging"),this._mouseDrag(b,!0);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();this._trigger("drag",b,d),this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b),d._clear()})}else this._trigger("stop",b),this._clear();return!1},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone():this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(a){a.left!=undefined&&(this.offset.click.left=a.left+this.margins.left),a.right!=undefined&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),a.top!=undefined&&(this.offset.click.top=a.top+this.margins.top),a.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body&&a.browser.mozilla||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass(this.options.cssNamespace+"-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute"));return a.widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,options:this.options}}})),a.extend(a.ui.draggable,{version:"1.6rc5",eventPrefix:"drag",defaults:{appendTo:"parent",axis:!1,cancel:":input,option",connectToSortable:!1,containment:!1,cssNamespace:"ui",cursor:"default",cursorAt:null,delay:0,distance:1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:null,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:null}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable");d.sortables=[],a(c.options.connectToSortable).each(function(){a(this+"").each(function(){if(a.data(this,"sortable")){var c=a.data(this,"sortable");d.sortables.push({instance:c,shouldRevert:c.options.revert}),c._refreshItems(),c._trigger("activate",b,d)}})})},stop:function(b,c){var d=a(this).data("draggable");a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.element.triggerHandler("sortreceive",[b,a.extend(this.instance._uiHash(),{sender:d.element})],this.instance.options.receive),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,d))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(g){f.call(d,this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,this.instance.fromOutside=!0),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body");d.css("cursor")&&(c.options._cursor=d.css("cursor")),d.css("cursor",c.options.cursor)},stop:function(b,c){c.options._cursor&&a("body").css("cursor",c.options._cursor)}}),a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){a(c.options.iframeFix===!0?"iframe":c.options.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")})},stop:function(b,c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper);d.css("opacity")&&(c.options._opacity=d.css("opacity")),d.css("opacity",c.options.opacity)},stop:function(b,c){c.options._opacity&&a(c.helper).css("opacity",c.options._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=c.options,e=a(this).data("draggable");e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"&&(e.overflowOffset=e.scrollParent.offset())},drag:function(b,c){var d=c.options,e=!1,f=a(this).data("draggable");f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"?(f.overflowOffset.top+f.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-f.overflowOffset.top<d.scrollSensitivity&&(f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop-d.scrollSpeed),f.overflowOffset.left+f.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-f.overflowOffset.left<d.scrollSensitivity&&(f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)),b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(f,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable");d.snapElements=[],a(c.options.snap.constructor!=String?c.options.snap.items||":data(draggable)":c.options.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=c.options.snapTolerance,f=c.absolutePosition.left,g=f+d.helperProportions.width,h=c.absolutePosition.top,i=h+d.helperProportions.height;for(var j=d.snapElements.length-1;j>=0;j--){var k=d.snapElements[j].left,l=k+d.snapElements[j].width,m=d.snapElements[j].top,n=m+d.snapElements[j].height;if(!(k-e<f&&f<l+e&&m-e<h&&h<n+e||k-e<f&&f<l+e&&m-e<i&&i<n+e||k-e<g&&g<l+e&&m-e<h&&h<n+e||k-e<g&&g<l+e&&m-e<i&&i<n+e)){d.snapElements[j].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[j].item})),d.snapElements[j].snapping=!1;continue}if(c.options.snapMode!="inner"){var o=Math.abs(m-i)<=e,p=Math.abs(n-h)<=e,q=Math.abs(k-g)<=e,r=Math.abs(l-f)<=e;o&&(c.position.top=d._convertPositionTo("relative",{top:m-d.helperProportions.height,left:0}).top),p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top),q&&(c.position.left=d._convertPositionTo("relative",{top:0,left:k-d.helperProportions.width}).left),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left)}var s=o||p||q||r;if(c.options.snapMode!="outer"){var o=Math.abs(m-h)<=e,p=Math.abs(n-i)<=e,q=Math.abs(k-f)<=e,r=Math.abs(l-g)<=e;o&&(c.position.top=d._convertPositionTo("relative",{top:m,left:0}).top),p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top),q&&(c.position.left=d._convertPositionTo("relative",{top:0,left:k}).left),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left)}!d.snapElements[j].snapping&&(o||p||q||r||s)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[j].item})),d.snapElements[j].snapping=o||p||q||r||s}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a.makeArray(a(c.options.stack.group)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||c.options.stack.min)-(parseInt(a(d).css("zIndex"),10)||c.options.stack.min)});a(d).each(function(a){this.style.zIndex=c.options.stack.min+a}),this[0].style.zIndex=c.options.stack.min+d.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper);d.css("zIndex")&&(c.options._zIndex=d.css("zIndex")),d.css("zIndex",c.options.zIndex)},stop:function(b,c){c.options._zIndex&&a(c.helper).css("zIndex",c.options._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{_init:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.options.accept=this.options.accept&&a.isFunction(this.options.accept)?this.options.accept:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[this.options.scope]=a.ui.ddmanager.droppables[this.options.scope]||[],a.ui.ddmanager.droppables[this.options.scope].push(this),this.options.cssNamespace&&this.element.addClass(this.options.cssNamespace+"-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass(this.options.cssNamespace+"-droppable "+this.options.cssNamespace+"-droppable-disabled").removeData("droppable").unbind(".droppable")},_setData:function(b,c){b=="accept"?this.options.accept=c&&a.isFunction(c)?c:function(a){return a.is(accept)}:a.widget.prototype._setData.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;a.ui.plugin.call(this,"activate",[b,this.ui(c)]),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;a.ui.plugin.call(this,"deactivate",[b,this.ui(c)]),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.options.accept.call(this.element,c.currentItem||c.element)&&(a.ui.plugin.call(this,"over",[b,this.ui(c)]),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.options.accept.call(this.element,c.currentItem||c.element)&&(a.ui.plugin.call(this,"out",[b,this.ui(c)]),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;this.element.find(":data(droppable)").not("."+d.options.cssNamespace+"-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){e=!0;return!1}});if(e)return!1;if(this.options.accept.call(this.element,d.currentItem||d.element)){a.ui.plugin.call(this,"drop",[b,this.ui(d)]),this._trigger("drop",b,this.ui(d));return this.element}return!1},plugins:{},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,absolutePosition:a.positionAbs,options:this.options,element:this.element}}}),a.extend(a.ui.droppable,{version:"1.6rc5",eventPrefix:"drop",defaults:{accept:"*",activeClass:null,cssNamespace:"ui",greedy:!1,hoverClass:null,scope:"default",tolerance:"intersect"}}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<e&&f<j&&k<g&&h<l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();droppablesLoop:for(var g=0;g<d.length;g++){if(d[g].options.disabled||b&&!d[g].options.accept.call(d[g].element,b.currentItem||b.element))continue;for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue droppablesLoop}d[g].visible=d[g].element.css("display")!="none";if(!d[g].visible)continue;d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight},(e=="dragstart"||e=="sortactivate")&&d[g]._activate.call(d[g],c)}},drop:function(b,c){var d=!1;a.each(a.ui.ddmanager.droppables[b.options.scope],function(){!this.options||(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.options.accept.call(this.element,b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))});return d},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))}})}},a.ui.plugin.add("droppable","activeClass",{activate:function(b,c){a(this).addClass(c.options.activeClass)},deactivate:function(b,c){a(this).removeClass(c.options.activeClass)},drop:function(b,c){a(this).removeClass(c.options.activeClass)}}),a.ui.plugin.add("droppable","hoverClass",{over:function(b,c){a(this).addClass(c.options.hoverClass)},out:function(b,c){a(this).removeClass(c.options.hoverClass)},drop:function(b,c){a(this).removeClass(c.options.hoverClass)}})}(jQuery),function(a){function b(b){return!a(b).is(":hidden")&&!a(b).parents(":hidden").length}a.widget("ui.resizable",a.extend({},a.ui.mouse,{_init:function(){var b=this,c=this.options,d=this.element.css("position");this.originalElement=this.element,this.element.addClass("ui-resizable").css({position:/static/.test(d)?"relative":d}),a.extend(c,{_aspectRatio:!!c.aspectRatio,helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null,knobHandles:c.knobHandles===!0?"ui-resizable-knob-handle":c.knobHandles});var e="1px solid #DEDEDE";c.defaultTheme={"ui-resizable":{display:"block"},"ui-resizable-handle":{position:"absolute",background:"#F2F2F2",fontSize:"0.1px"},"ui-resizable-n":{cursor:"n-resize",height:"4px",left:"0px",right:"0px",borderTop:e},"ui-resizable-s":{cursor:"s-resize",height:"4px",left:"0px",right:"0px",borderBottom:e},"ui-resizable-e":{cursor:"e-resize",width:"4px",top:"0px",bottom:"0px",borderRight:e},"ui-resizable-w":{cursor:"w-resize",width:"4px",top:"0px",bottom:"0px",borderLeft:e},"ui-resizable-se":{cursor:"se-resize",width:"4px",height:"4px",borderRight:e,borderBottom:e},"ui-resizable-sw":{cursor:"sw-resize",width:"4px",height:"4px",borderBottom:e,borderLeft:e},"ui-resizable-ne":{cursor:"ne-resize",width:"4px",height:"4px",borderRight:e,borderTop:e},"ui-resizable-nw":{cursor:"nw-resize",width:"4px",height:"4px",borderLeft:e,borderTop:e}},c.knobTheme={"ui-resizable-handle":{background:"#F2F2F2",border:"1px solid #808080",height:"8px",width:"8px"},"ui-resizable-n":{cursor:"n-resize",top:"0px",left:"45%"},"ui-resizable-s":{cursor:"s-resize",bottom:"0px",left:"45%"},"ui-resizable-e":{cursor:"e-resize",right:"0px",top:"45%"},"ui-resizable-w":{cursor:"w-resize",left:"0px",top:"45%"},"ui-resizable-se":{cursor:"se-resize"
,right:"0px",bottom:"0px"},"ui-resizable-sw":{cursor:"sw-resize",left:"0px",bottom:"0px"},"ui-resizable-nw":{cursor:"nw-resize",left:"0px",top:"0px"},"ui-resizable-ne":{cursor:"ne-resize",right:"0px",top:"0px"}},c._nodeName=this.element[0].nodeName;if(c._nodeName.match(/canvas|textarea|input|select|button|img/i)){var f=this.element;/relative/.test(f.css("position"))&&a.browser.opera&&f.css({position:"relative",top:"auto",left:"auto"}),f.wrap(a('<div class="ui-wrapper"\tstyle="overflow: hidden;"></div>').css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}));var g=this.element;this.element=this.element.parent(),this.element.data("resizable",this),this.element.css({marginLeft:g.css("marginLeft"),marginTop:g.css("marginTop"),marginRight:g.css("marginRight"),marginBottom:g.css("marginBottom")}),g.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),a.browser.safari&&c.preventDefault&&g.css("resize","none"),c.proportionallyResize=g.css({position:"static",zoom:1,display:"block"}),this.element.css({margin:g.css("margin")}),this._proportionallyResize()}c.handles||(c.handles=a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(c.handles.constructor==String){c.zIndex=c.zIndex||1e3,c.handles=="all"&&(c.handles="n,e,s,w,se,sw,ne,nw");var h=c.handles.split(",");c.handles={};var i={handle:"position: absolute; display: none; overflow:hidden;",n:"top: 0pt; width:100%;",e:"right: 0pt; height:100%;",s:"bottom: 0pt; width:100%;",w:"left: 0pt; height:100%;",se:"bottom: 0pt; right: 0px;",sw:"bottom: 0pt; left: 0px;",ne:"top: 0pt; right: 0px;",nw:"top: 0pt; left: 0px;"};for(var j=0;j<h.length;j++){var k=a.trim(h[j]),l=c.defaultTheme,m="ui-resizable-"+k,n=!a.ui.css(m)&&!c.knobHandles,o=a.ui.css("ui-resizable-knob-handle"),p=a.extend(l[m],l["ui-resizable-handle"]),q=a.extend(c.knobTheme[m],o?{}:c.knobTheme["ui-resizable-handle"]),r=/sw|se|ne|nw/.test(k)?{zIndex:++c.zIndex}:{},s=n?i[k]:"",t=a(['<div class="ui-resizable-handle ',m,'" style="',s,i.handle,'"></div>'].join("")).css(r);"se"==k&&t.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),c.handles[k]=".ui-resizable-"+k,this.element.append(t.css(n?p:{}).css(c.knobHandles?q:{}).addClass(c.knobHandles?"ui-resizable-knob-handle":"").addClass(c.knobHandles))}c.knobHandles&&this.element.addClass("ui-resizable-knob").css(a.ui.css("ui-resizable-knob")?{}:{})}this._renderAxis=function(b){b=b||this.element;for(var d in c.handles){c.handles[d].constructor==String&&(c.handles[d]=a(c.handles[d],this.element).show()),c.transparent&&c.handles[d].css({opacity:0});if(this.element.is(".ui-wrapper")&&c._nodeName.match(/textarea|input|select|button/i)){var e=a(c.handles[d],this.element),f=0;f=/sw|ne|nw|se|n|s/.test(d)?e.outerHeight():e.outerWidth();var g=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join("");c.transparent||b.css(g,f),this._proportionallyResize()}if(!a(c.handles[d]).length)continue}},this._renderAxis(this.element),c._handles=a(".ui-resizable-handle",b.element),c.disableSelection&&c._handles.disableSelection(),c._handles.mouseover(function(){if(!c.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=c.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(c._handles.hide(),a(b.element).addClass("ui-resizable-autohide").hover(function(){a(this).removeClass("ui-resizable-autohide"),c._handles.show()},function(){c.resizing||(a(this).addClass("ui-resizable-autohide"),c._handles.hide())})),this._mouseInit()},destroy:function(){var b=this.element,c=b.children(".ui-resizable").get(0);this._mouseDestroy();var d=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};d(b),b.is(".ui-wrapper")&&c&&(b.parent().append(a(c).css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).end().remove(),d(c))},_mouseCapture:function(b){if(this.options.disabled)return!1;var c=!1;for(var d in this.options.handles)a(this.options.handles[d])[0]==b.target&&(c=!0);if(!c)return!1;return!0},_mouseStart:function(b){var c=this.options,d=this.element.position(),e=this.element,f=function(a){return parseInt(a,10)||0},g=a.browser.msie&&a.browser.version<7;c.resizing=!0,c.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(e.is(".ui-draggable")||/absolute/.test(e.css("position"))){var h=a.browser.msie&&!c.containment&&/absolute/.test(e.css("position"))&&!/relative/.test(e.parent().css("position")),i=h?c.documentScroll.top:0,j=h?c.documentScroll.left:0;e.css({position:"absolute",top:d.top+i,left:d.left+j})}a.browser.opera&&/relative/.test(e.css("position"))&&e.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var k=f(this.helper.css("left")),l=f(this.helper.css("top"));c.containment&&(k+=a(c.containment).scrollLeft()||0,l+=a(c.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:k,top:l},this.size=c.helper||g?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalSize=c.helper||g?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalPosition={left:k,top:l},this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},c.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;if(c.preserveCursor){var m=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",m=="auto"?this.axis+"-resize":m)}this._propagate("start",b);return!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;if(d._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!d.helper&&d.proportionallyResize&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.options.resizing=!1;var c=this.options,d=function(a){return parseInt(a,10)||0},e=this;if(c.helper){var f=c.proportionallyResize,g=f&&/textarea/i.test(f.get(0).nodeName),h=g&&a.ui.hasScroll(f.get(0),"left")?0:e.sizeDiff.height,i=g?0:e.sizeDiff.width,j={width:e.size.width-i,height:e.size.height-h},k=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,l=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;c.animate||this.element.css(a.extend(j,{top:l,left:k})),c.helper&&!c.animate&&this._proportionallyResize()}c.preserveCursor&&a("body").css("cursor","auto"),this._propagate("stop",b),c.helper&&this.helper.remove();return!1},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),a.left&&(this.position.left=a.left),a.top&&(this.position.top=a.top),a.height&&(this.size.height=a.height),a.width&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,d=this.position,e=this.size,f=this.axis;a.height?a.width=e.height*c.aspectRatio:a.width&&(a.height=e.width/c.aspectRatio),f=="sw"&&(a.left=d.left+(e.width-a.width),a.top=null),f=="nw"&&(a.top=d.top+(e.height-a.height),a.left=d.left+(e.width-a.width));return a},_respectSize:function(a,b){var c=this.helper,d=this.options,e=d._aspectRatio||b.shiftKey,f=this.axis,g=a.width&&d.maxWidth&&d.maxWidth<a.width,h=a.height&&d.maxHeight&&d.maxHeight<a.height,i=a.width&&d.minWidth&&d.minWidth>a.width,j=a.height&&d.minHeight&&d.minHeight>a.height;i&&(a.width=d.minWidth),j&&(a.height=d.minHeight),g&&(a.width=d.maxWidth),h&&(a.height=d.maxHeight);var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(f),n=/nw|ne|n/.test(f);i&&m&&(a.left=k-d.minWidth),g&&m&&(a.left=k-d.maxWidth),j&&n&&(a.top=l-d.minHeight),h&&n&&(a.top=l-d.maxHeight);var o=!a.width&&!a.height;o&&!a.left&&a.top?a.top=null:o&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){var c=this.options;if(!!c.proportionallyResize){var d=c.proportionallyResize,e=this.helper||this.element;if(!c.borderDif){var f=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],g=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];c.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(a.browser.msie&&!b(e))return;d.css({height:e.height()-c.borderDif[0]-c.borderDif[2]||0,width:e.width()-c.borderDif[1]-c.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(c.helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(c.helper).css({width:b.outerWidth()+f,height:b.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body"),c.disableSelection&&this.helper.disableSelection()}else this.helper=b},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,options:this.options,originalSize:this.originalSize,originalPosition:this.originalPosition}}})),a.extend(a.ui.resizable,{version:"1.6rc5",eventPrefix:"resize",defaults:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,cancel:":input,option",containment:!1,delay:0,disableSelection:!0,distance:1,ghost:!1,grid:!1,knobHandles:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,preserveCursor:!0,preventDefault:!0,proportionallyResize:!1,transparent:!1}}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=c.options,e=a(this).data("resizable"),f=function(b){a(b).each(function(){a(this).data("resizable-alsoresize",{width:parseInt(a(this).width(),10),height:parseInt(a(this).height(),10),left:parseInt(a(this).css("left"),10),top:parseInt(a(this).css("top"),10)})})};typeof d.alsoResize=="object"&&!d.alsoResize.parentNode?d.alsoResize.length?(d.alsoResize=d.alsoResize[0],f(d.alsoResize)):a.each(d.alsoResize,function(a,b){f(a)}):f(d.alsoResize)},resize:function(b,c){var d=c.options,e=a(this).data("resizable"),f=e.originalSize,g=e.originalPosition,h={height:e.size.height-f.height||0,width:e.size.width-f.width||0,top:e.position.top-g.top||0,left:e.position.left-g.left||0},i=function(b,c){a(b).each(function(){var b=a(this),d=a(this).data("resizable-alsoresize"),f={},g=c&&c.length?c:["width","height","top","left"];a.each(g||["width","height","top","left"],function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),/relative/.test(b.css("position"))&&a.browser.opera&&(e._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(f)})};typeof d.alsoResize=="object"&&!d.alsoResize.nodeType?a.each(d.alsoResize,function(a,b){i(a,b)}):i(d.alsoResize)},stop:function(b,c){var d=a(this).data("resizable");d._revertToRelativePosition&&a.browser.opera&&(d._revertToRelativePosition=!1,el.css({position:"relative"})),a(this).removeData("resizable-alsoresize-start")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=c.options,e=a(this).data("resizable"),f=d.proportionallyResize,g=f&&/textarea/i.test(f.get(0).nodeName),h=g&&a.ui.hasScroll(f.get(0),"left")?0:e.sizeDiff.height,i=g?0:e.sizeDiff.width,j={width:e.size.width-i,height:e.size.height-h},k=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,l=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var a={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};f&&f.css({width:a.width,height:a.height}),e._updateCache(a),e._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,c){var d=c.options,e=a(this).data("resizable"),f=e.element,g=d.containment,h=g instanceof a?g.get(0):/parent/.test(g)?f.parent().get(0):g;if(!!h){e.containerElement=a(h);if(/document/.test(g)||g==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{e.containerOffset=a(h).offset(),e.containerPosition=a(h).position(),e.containerSize={height:a(h).innerHeight(),width:a(h).innerWidth()};var i=e.containerOffset,j=e.containerSize.height,k=e.containerSize.width,l=a.ui.hasScroll(h,"left")?h.scrollWidth:k,m=a.ui.hasScroll(h)?h.scrollHeight:j;e.parentData={element:h,left:i.left,top:i.top,width:l,height:m}}}},resize:function(b,c){var d=c.options,e=a(this).data("resizable"),f=e.containerSize,g=e.containerOffset,h=e.size,i=e.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=e.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=e.containerPosition),i.left<(d.helper?g.left:0)&&(e.size.width=e.size.width+(d.helper?e.position.left-g.left:e.position.left-k.left),j&&(e.size.height=e.size.width/d.aspectRatio),e.position.left=d.helper?g.left:0),i.top<(d.helper?g.top:0)&&(e.size.height=e.size.height+(d.helper?e.position.top-g.top:e.position.top),j&&(e.size.width=e.size.height*d.aspectRatio),e.position.top=d.helper?g.top:0);var m=Math.abs((d.helper?e.offset.left-k.left:e.offset.left-k.left)+e.sizeDiff.width),n=Math.abs((d.helper?e.offset.top-k.top:e.offset.top-g.top)+e.sizeDiff.height);m+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-m,j&&(e.size.height=e.size.width/d.aspectRatio)),n+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-n,j&&(e.size.width=e.size.height*d.aspectRatio))},stop:function(b,c){var d=c.options,e=a(this).data("resizable"),f=e.position,g=e.containerOffset,h=e.containerPosition,i=e.containerElement,j=a(e.helper),k=j.offset(),l=j.outerWidth()-e.sizeDiff.width,m=j.outerHeight()-e.sizeDiff.height;d.helper&&!d.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d.helper&&!d.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=c.options,e=a(this).data("resizable"),f=d.proportionallyResize,g=e.size;f?e.ghost=f.clone():e.ghost=e.element.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:g.height,width:g.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof d.ghost=="string"?d.ghost:""),e.ghost.appendTo(e.helper)},resize:function(b,c){var d=c.options,e=a(this).data("resizable"),f=d.proportionallyResize;e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(b,c){var d=c.options,e=a(this).data("resizable"),f=d.proportionallyResize;e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=c.options,e=a(this).data("resizable"),f=e.size,g=e.originalSize,h=e.originalPosition,i=e.axis,j=d._aspectRatio||b.shiftKey;d.grid=typeof d.grid=="number"?[d.grid,d.grid]:d.grid;var k=Math.round((f.width-g.width)/(d.grid[0]||1))*(d.grid[0]||1),l=Math.round((f.height-g.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(i)?(e.size.width=g.width+k,e.size.height=g.height+l):/^(ne)$/.test(i)?(e.size.width=g.width+k,e.size.height=g.height+l,e.position.top=h.top-l):/^(sw)$/.test(i)?(e.size.width=g.width+k,e.size.height=g.height+l,e.position.left=h.left-k):(e.size.width=g.width+k,e.size.height=g.height+l,e.position.top=h.top-l,e.position.left=h.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.extend({},a.ui.mouse,{_init:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy()},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a("body").append(this.helper),this.helper.css({"z-index":100,position:"absolute",left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){d.$element.removeClass("ui-unselecting").addClass("ui-selecting"),d.unselecting=!1,d.selecting=!0,d.selected=!0,c._trigger("selecting",b,{selecting:d.element});return!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!!i&&i.element!=c.element[0]){var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&(b.metaKey&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}});return!1}},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove();return!1}})),a.extend(a.ui.selectable,{version:"1.6rc5",defaults:{appendTo:"body",autoRefresh:!0,cancel:":input,option",delay:0,distance:0,filter:"*",tolerance:"touch"}})}(jQuery),function(a){a.widget("ui.sortable",a.extend({},a.ui.mouse,{_init:function(){var a=this.options;this.containerCache={},this.options.cssNamespace&&this.element.addClass(this.options.cssNamespace+"-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass(this.options.cssNamespace+"-sortable "+this.options.cssNamespace+"-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item")},_mouseCapture:function(b,c){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var d=null,e=this,f=a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==e){d=a(this);return!1}});a.data(b.target,"sortable-item")==e&&(d=a(b.target));if(!d)return!1;if(this.options.handle&&!c){var g=!1;a(this.options.handle,d).find("*").andSelf().each(function(){this==b.target&&(g=!0)});if(!g)return!1}this.currentItem=d,this._removeCurrentsFromItems();return!0},_mouseStart:function(b,c,d){var e=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),this._trigger("start",b),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",b,this);a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass(e.cssNamespace+"-sortable-helper"),this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),a.ui.plugin.call(this,"sort",[b,this._uiHash()]),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var c=this.items.length-1;c>=0;c--){var d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d);if(!f)continue;if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!a.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],e):!0)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(d))this.options.sortIndicator.call(this,b,d);else break;this._trigger("change",b);break}}this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b),this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,c){if(!!b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass(this.options.cssNamespace+"-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this),this.containers[b].containerCache.over=0)}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem);return!0},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});return d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!e)return!1;return this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1)},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a),this.refreshPositions()},_getItemsAsjQuery:function(b){var c=this,d=[],e=[];if(this.options.connectWith&&b)for(var f=this.options.connectWith.length-1;f>=0;f--){var g=a(this.options.connectWith[f]);for(var h=g.length-1;h>=0;h--){var i=a.data(g[h],"sortable");i&&i!=this&&!i.options.disabled&&e.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not("."+i.options.cssNamespace+"-sortable-helper"),i])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not("."+this.options.cssNamespace+"-sortable-helper"),this]);for(var f=e.length-1;f>=0;f--)e[f][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data(sortable-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];if(this.options.connectWith)for(var f=this.options.connectWith.length-1;f>=0;f--){var g=a(this.options.connectWith[f]);for(var h=g.length-1;h>=0;h--){var i=a.data(g[h],"sortable");i&&i!=this&&!i.options.disabled&&(e.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}}for(var f=e.length-1;f>=0;f--){var j=e[f][1],k=e[f][0];for(var h=0,l=k.length;h<l;h++){var m=a(k[h]);m.data("sortable-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(this.options.accurateIntersection?(d.width=e.outerWidth(),d.height=e.outerHeight()):(d.width=e[0].offsetWidth,d.height=e[0].offsetHeight));var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" "+c.options.cssNamespace+"-sortable-placeholder").removeClass(c.options.cssNamespace+"-sortable-helper")[0];e||(b.style.visibility="hidden");return b},update:function(a,b){if(!e||!!d.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=this.containers.length-1;c>=0;c--)if(this._intersectsWith(this.containers[c].containerCache)){if(!this.containers[c].containerCache.over){if(this.currentContainer!=this.containers[c]){var d=1e4,e=null,f=this.positionAbs[this.containers[c].floating?"left":"top"];for(var g=this.items.length-1;g>=0;g--){if(!a.ui.contains(this.containers[c].element[0],this.items[g].item[0]))continue;var h=this.items[g][this.containers[c].floating?"left":"top"];Math.abs(h-f)<d&&(d=Math.abs(h-f),e=this.items[g])}if(!e&&!this.options.dropOnEmpty)continue;this.currentContainer=this.containers[c],e?this.options.sortIndicator.call(this,b,e,null,!0):this.options.sortIndicator.call(this,b,null,this.containers[c].element,!0),this._trigger("change",b),this.containers[c]._trigger("change",b,this),this.options.placeholder.update(this.currentContainer,this.placeholder)}this.containers[c]._trigger("over",b,this),this.containers[c].containerCache
.over=1}}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this),this.containers[c].containerCache.over=0)},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(a){a.left!=undefined&&(this.offset.click.left=a.left+this.margins.left),a.right!=undefined&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),a.top!=undefined&&(this.offset.click.top=a.top+this.margins.top),a.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body&&a.browser.mozilla||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1,this._noFinalSort||this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS)if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static")this._storedCSS[d]="";this.currentItem.css(this._storedCSS).removeClass(this.options.cssNamespace+"-sortable-helper")}else this.currentItem.show();this.fromOutside&&this._trigger("receive",b,this,c),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not("."+this.options.cssNamespace+"-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&this._trigger("update",b,null,c);if(!a.ui.contains(this.element[0],this.currentItem[0])){this._trigger("remove",b,null,c);for(var d=this.containers.length-1;d>=0;d--)a.ui.contains(this.containers[d].element[0],this.currentItem[0])&&(this.containers[d]._trigger("receive",b,this,c),this.containers[d]._trigger("update",b,this,c))}for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("deactivate",b,this,c),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",b,this),this.containers[d].containerCache.over=0);this.dragging=!1;if(this.cancelHelperRemoval){this._trigger("beforeStop",b,null,c),this._trigger("stop",b,null,c);return!1}this._trigger("beforeStop",b,null,c),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,this._trigger("stop",b,null,c),this.fromOutside=!1;return!0},_trigger:function(b,c,d,e){a.ui.plugin.call(this,b,[c,this._uiHash(d)]),e||a.widget.prototype._trigger.call(this,b,c,this._uiHash(d))===!1&&this.cancel()},plugins:{},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,absolutePosition:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})),a.extend(a.ui.sortable,{getter:"serialize toArray",version:"1.6rc5",defaults:{accurateIntersection:!0,appendTo:"parent",cancel:":input,option",cssNamespace:"ui",delay:0,distance:1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,helper:"original",items:"> *",scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,sortIndicator:a.ui.sortable.prototype._rearrange,tolerance:"default",zIndex:1e3}}),a.ui.plugin.add("sortable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("sortable");d.css("cursor")&&(e.options._cursor=d.css("cursor")),d.css("cursor",e.options.cursor)},beforeStop:function(b,c){var d=a(this).data("sortable");d.options._cursor&&a("body").css("cursor",d.options._cursor)}}),a.ui.plugin.add("sortable","opacity",{start:function(b,c){var d=c.helper,e=a(this).data("sortable");d.css("opacity")&&(e.options._opacity=d.css("opacity")),d.css("opacity",e.options.opacity)},beforeStop:function(b,c){var d=a(this).data("sortable");d.options._opacity&&a(c.helper).css("opacity",d.options._opacity)}}),a.ui.plugin.add("sortable","scroll",{start:function(b,c){var d=a(this).data("sortable"),e=d.options;d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},sort:function(b,c){var d=a(this).data("sortable"),e=d.options,f=!1;d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"?(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed),d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)):(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed)),b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("sortable","zIndex",{start:function(b,c){var d=c.helper,e=a(this).data("sortable");d.css("zIndex")&&(e.options._zIndex=d.css("zIndex")),d.css("zIndex",e.options.zIndex)},beforeStop:function(b,c){var d=a(this).data("sortable");d.options._zIndex&&a(c.helper).css("zIndex",d.options._zIndex=="auto"?"":d.options._zIndex)}})}(jQuery)