//Suggestion 용 함수들 from locationTag
function ctlRefresh(){window.location.reload()}function cleanUser(a){if(!confirm(_t("모든 글과 블로그가 관리자의 소유로 옮겨집니다.")+"\t\n\n"+_t("되돌릴 수 없습니다.")+"\t\n\n"+_t("계속 진행하시겠습니까?")))return!1;var b=new HTTPRequest(blogURL+"/control/action/user/delete/?userid="+a);b.onSuccess=function(){PM.removeRequest(this),window.location.href="../"},b.onError=function(){PM.removeRequest(this),msg=this.getText("/response/result"),alert(_t("사용자 삭제에 실패하였습니다.")+"\r\nError : "+msg)},PM.addRequest(b,_t("사용자 삭제중")),b.send()}function sendBlogAddInfo(a,b){var c=new HTTPRequest(blogURL+"/control/action/blog/add/?owner="+a+"&identify="+b);c.onSuccess=function(){PM.showMessage(_t("새로운 블로그가 추가되었습니다."),"right","top"),ctlRefresh()},c.onError=function(){msg=this.getText("/response/result"),alert(_t("블로그를 추가하지 못했습니다.")+"\r\nError : "+msg)},c.send()}function sendUserAddInfo(a,b){var c=new HTTPRequest(blogURL+"/control/action/user/add/?name="+a+"&email="+b);c.onSuccess=function(){PM.showMessage(_t("새로운 사용자가 추가되었습니다."),"right","top"),ctlRefresh()},c.onError=function(){msg=this.getText("/response/result"),alert(_t("사용자를 추가하지 못했습니다.")+"\r\nError : "+msg)},c.send()}function debug(a){try{document.getElementById("debug").innerHTML=++x+")"+a+"<br />"+document.getElementById("debug").innerHTML}catch(b){}}function getOffsetLeft(a){return a?a.offsetLeft+getOffsetLeft(a.offsetParent):0}function getOffsetTop(a){return a?a.offsetTop+getOffsetTop(a.offsetParent):0}function ctlUserSuggest(a,b){this.name="Textcube Control Panel User Suggestion Object",this.copyright="Tatter Network Foundation",this.allowSuggestion=typeof b=="undefined"?!1:!b,this.isFocused=!1,this.isSettingValue=!1,this.instance=this,this.cursor=0,this.inputClassName="",this.isTyping=!1,this.isSuggestionShown=!1,this.typingText="",this.container=a,this.container.instance=this,this.suggestion=document.createElement("ul"),this.suggestion.instance=this,this.suggestion.selectedIndex=0,this.suggestion.className="ctlUserSuggest",this.suggestion.style.margin="0px",this.suggestion.style.padding="0px",this.suggestion.style.listStyleType="none",this.suggestion.style.position="absolute",this.suggestion.style.display="none",this.suggestion.style.zIndex="999",this.input=document.createElement("input"),this.input.instance=this,this.input.setAttribute("autocomplete","off"),this.input.onblur=function(){this.instance.isTyping=!1,this.instance.typingText="",this.instance.setValue(this.value),this.instance.isFocused=!1},this.input.onfocus=function(){this.instance.isFocused||(this.instance.isFocused=!0,this.instance.isTyping=!0,this.instance.typingText=this.value,this.instance.requestSuggestion())},this.input.onkeydown=function(a){var b=this.instance;b.isTyping=!0,a=b.adjustEventCompatibility(a);switch(a.keyCode){case 13:b.setValue(this.value,!1);break;case 9:b.setValue(this.value,!1);return a.keyCode;case 27:b.hideSuggestion();break;case 38:b.moveUp();break;case 40:b.moveDown();break;default:return a.keyCode}a.returnValue=!1,a.cancelBubble=!0;try{a.preventDefault()}catch(c){}return!1},this.input.onkeypress=function(a){return preventEnter(a)},this.input.onkeyup=function(a){var b=this.instance;b.isTyping=!0,a=b.adjustEventCompatibility(a);switch(a.keyCode){default:return a.keyCode}a.returnValue=!1,a.cancelBubble=!0;try{a.preventDefault()}catch(c){}return!1},setInterval("ctlUserSuggestFunction_WatchInputBox('"+this.container.id+"')",10),this.container.appendChild(this.input)}function ctlUserSuggestFunction_showSuggestion(){try{var a=document.getElementById(arguments[0]).instance}catch(b){return}debug('<span style="color: red">Received '+a.cursor+"</span>");if(a.cursor==arguments[1]&&!!a.isTyping){a.suggestion.style.left=getOffsetLeft(a.input)+"px",a.suggestion.style.top=getOffsetTop(a.input)+a.input.offsetHeight+"px";var c=new StringBuffer;if(arguments[2]!=0){a.hideSuggestion();return!1}for(var d=3;d<arguments.length;d++)arguments[d]=arguments[d].replaceAll("&quot;",'"'),STD.isSafari&&(arguments[d]=decodeURIComponent(arguments[d])),c.append('<li onmouseover="this.className=\'hover\'" onmouseout="this.className=\'\'" onmousedown="this.parentNode.instance.suggestionMouseClick(this)">'),c.append(arguments[d].replace(new RegExp("("+a.input.value+")","gi"),"<em>$1</em>")),c.append("</li>");a.suggestion.innerHTML=c.toString(),a.suggestion.style.display="block",a.isSuggestionShown=!0;try{document.body.removeChild(a.suggestion)}catch(b){}document.body.appendChild(a.suggestion)}}function ctlUserSuggestFunction_WatchInputBox(a){try{var b=document.getElementById(a).instance;b.input.value!=b.typingText&&(b.typingText=b.input.value,b.requestSuggestion())}catch(c){}}ctlUserSuggest.prototype.setValue=function(a,b){if(!this.isSettingValue){this.isSettingValue=!0,this.hideSuggestion();var c=this.input;this.input.value=a,this.typingText=a,this.isSettingValue=!1}},ctlUserSuggest.prototype.focusOnInput=function(){this.input.focus(),this.input.select();try{setTimeout("document.getElementById('"+this.container.id+"').instance.input.focus()",1)}catch(a){}},ctlUserSuggest.prototype.getValue=function(){return this.input.value},ctlUserSuggest.prototype.suggestionMouseClick=function(a){this.setValue(a.innerHTML.replace(new RegExp("</?em>","gi"),"").replaceAll("&amp;","&").match("^[^ ]*"),!0),this.hideSuggestion()},ctlUserSuggest.prototype.hideSuggestion=function(){this.isSuggestionShown=!1,this.suggestion.style.display="none",this.suggestion.selectedIndex=0},ctlUserSuggest.prototype.moveUp=function(){this.isSuggestionShown&&(this.cursor++,this.suggestion.selectedIndex--,this.suggestion.selectedIndex<1&&(this.suggestion.selectedIndex=this.suggestion.childNodes.length),this.highlightRow())},ctlUserSuggest.prototype.moveDown=function(){this.isSuggestionShown&&(this.cursor++,this.suggestion.selectedIndex++,this.suggestion.selectedIndex>this.suggestion.childNodes.length&&(this.suggestion.selectedIndex=1),this.highlightRow())},ctlUserSuggest.prototype.highlightRow=function(){if(this.isSuggestionShown&&this.suggestion.childNodes[0].className!="disabled"){for(var a=0;a<this.suggestion.childNodes.length;a++)this.suggestion.childNodes[a].className=a==this.suggestion.selectedIndex-1?"hover":"";this.input.value=this.typingText=this.suggestion.childNodes[this.suggestion.selectedIndex-1].innerHTML.replace(new RegExp("</?em>","gi"),"").unhtmlspecialchars().match("^[^ ]*")}},ctlUserSuggest.prototype.requestSuggestion=function(){var a=this.instance;if(!!a.allowSuggestion){a.isTyping=!0,a.cursor++,debug("Request "+a.cursor);var b=document.createElement("script");b.setAttribute("src",blogURL+"/control/action/user/suggest/?id="+a.container.getAttribute("id")+"&cursor="+a.cursor+"&input="+encodeURIComponent(a.input.value)+(STD.isSafari?"&encode=1":"")),document.body.appendChild(b)}},ctlUserSuggest.prototype.adjustEventCompatibility=function(a){navigator.appName=="Microsoft Internet Explorer"&&(a=window.event,a.target=a.srcElement);return a};var StringBuffer=function(){this.buffer=[]};StringBuffer.prototype.append=function(a){this.buffer[this.buffer.length]=a},StringBuffer.prototype.toString=function(){return this.buffer.join("")},String.prototype.trim||(String.prototype.trim=function(){return this.replace(new RegExp("(^\\s*)|(\\s*$)","g"),"")}),String.prototype.htmlspecialchars||(String.prototype.htmlspecialchars=function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll("<","&gt;")}),String.prototype.unhtmlspecialchars||(String.prototype.unhtmlspecialchars=function(){return this.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">")});var x=0