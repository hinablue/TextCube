(function(j){jQuery.beautyOfCode={settings:{autoLoad:true,baseUrl:"http://alexgorbatchev.com/pub/sh/current/",scripts:"scripts/",styles:"styles/",theme:"Default",brushes:["Xml","JScript","Css","CSharp","Plain"],config:{},defaults:{},ready:function(){jQuery.beautyOfCode.beautifyAll()}},init:function(a){a=jQuery.extend({},jQuery.beautyOfCode.settings,a);if(!a.config.clipboardSwf)a.config.clipboardSwf=a.baseUrl+a.scripts+"clipboard.swf";j(document).ready(function(){if(a.autoLoad){jQuery.beautyOfCode.utils.loadCss(a.baseUrl+
a.styles+"shCore.css");jQuery.beautyOfCode.utils.loadCss(a.baseUrl+a.styles+"shTheme"+a.theme+".css","shTheme");var b=[];b.push(a.baseUrl+a.scripts+"shCore.js");jQuery.each(a.brushes,function(e,c){b.push(a.baseUrl+a.scripts+"shBrush"+c+".js")});jQuery.beautyOfCode.utils.loadAllScripts(b,function(){a&&a.config&&jQuery.extend(SyntaxHighlighter.config,a.config);a&&a.defaults&&jQuery.extend(SyntaxHighlighter.defaults,a.defaults);a.ready()})}else a.ready()})},beautifyAll:function(){jQuery("pre.code:has(code[class])").beautifyCode()},
utils:{loadScript:function(a,b){jQuery.ajax({url:a,complete:function(){b()},type:"GET",dataType:"script",cache:true})},loadAllScripts:function(a,b){!a||a.length==0?b():jQuery.beautyOfCode.utils.loadScript(a[0],function(){jQuery.beautyOfCode.utils.loadAllScripts(a.slice(1,a.length),b)})},loadCss:function(a,b){var e=jQuery("head")[0];if(a&&e){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("href",a);if(b)c.id=b;e.appendChild(c)}},addCss:function(a,b){var e=jQuery("head")[0];
if(a&&e){var c=document.createElement("style");c.setAttribute("type","text/css");if(b)c.id=b;if(c.styleSheet)c.styleSheet.cssText=a;else j(c).text(a);e.appendChild(c)}},addCssForBrush:function(a,b){if(!a.isCssInitialized){jQuery.beautyOfCode.utils.addCss(b.Style);a.isCssInitialized=true}},parseParams:function(a){var b=jQuery.map(a,jQuery.trim),e={},c=function(d,f){for(var g=new RegExp("^"+d+"\\[([^\\]]+)\\]$","gi"),h=null,i=0;i<f.length;i++)if((h=g.exec(f[i]))!=null)return h[1];return null};a=function(d){var f=
c("boc-"+d,b);if(f)e[d]=f};a("class-name");a("first-line");a("tab-size");if(a=c("boc-highlight",b))e.highlight=jQuery.map(a.split(","),jQuery.trim);a=function(d){if(jQuery.inArray("boc-"+d,b)!=-1)e[d]=true;else if(jQuery.inArray("boc-no-"+d,b)!=-1)e[d]=false};a("smart-tabs");a("ruler");a("gutter");a("toolbar");a("collapse");a("auto-links");a("light");a("wrap-lines");a("html-script");return e}}};jQuery.fn.beautifyCode=function(a,b){this.each(function(e,c){var d=jQuery(c),f=d.children("code"),g=f[0].className.split(" "),
h=a?a:g[0];g=jQuery.beautyOfCode.utils.parseParams(g);g=jQuery.extend({},SyntaxHighlighter.defaults,b,g);if(g["html-script"]=="true")highlighter=new SyntaxHighlighter.HtmlScript(h);else if(h=SyntaxHighlighter.utils.findBrush(h))highlighter=new h;else return;jQuery.beautyOfCode.utils.addCssForBrush(h,highlighter);if(d.is("pre")&&(f=d.children("code")))d.text(f.text());highlighter.highlight(d.html(),g);highlighter.source=c;d.replaceWith(highlighter.div)})}})(jQuery);
